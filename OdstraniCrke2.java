import java.util.Arrays;
import java.util.List;
import java.util.Set;

public class OdstraniCrke2 implements Stroj {
    private short dolzinaBesed;
    private char[][] zacetneBesede;
    private char[][] filtriraneBesede;
    private char[] prejsnjaIzbira;
    private char[][] slovar;

    @Override
    public void inicializiraj(Set<String> besede) {
        this.dolzinaBesed = 6;
        this.zacetneBesede = pretvoriBesede(besede);
        this.slovar = pretvoriBesede(besede);
    }

    @Override
    public String poteza(List<Character> odzivSeznam) {
        // Prva poteza
        if (odzivSeznam == null) {
            /*
            Tukaj re-inicializiramo vse spremenljivke (ker dobimo novo besedo) in
            vrnemo našo prvo besedo
            */

            this.filtriraneBesede = Arrays.copyOf(this.zacetneBesede, this.zacetneBesede.length);

            return new String(this.prejsnjaIzbira = vrniBesedo());
        }

        // pretvorimo tudi odziv v char[]
        char[] odziv = pretvoriOdziv(odzivSeznam);

        // Smo ugotovili
        if (kolikoVTabeli(odziv, '+') == this.dolzinaBesed) {
            /*
            Ugotovili smo besedo!
            */

            // odstranimo že ugotovljeno besedo iz slovarja
            odstaniUgotovljenoBesedo();

            return null;
        }

        // odstranimo besede, ki niso več relevantne
        this.filtriraneBesede = filtrirajBesede(this.filtriraneBesede, this.prejsnjaIzbira, odziv);

//        System.out.println(Arrays.deepToString(this.filtriraneBesede));

        boolean[] razlike = seSplacaIskatCrke();
        if (razlike != null) {
            return new String(this.prejsnjaIzbira = vrniBesedoZaIskanjeCrk(razlike));
        }

        if (this.filtriraneBesede.length == 1) {
            return new String(this.prejsnjaIzbira = this.filtriraneBesede[0]);
        }

        if (this.filtriraneBesede.length > 50) {
            return new String(this.prejsnjaIzbira = vrniBesedo());
        }

        return new String(this.prejsnjaIzbira = vrniBesedo2());
    }

    public char[] vrniBesedo() {
        short[] pogostostCrk = vrniPogostostCrk(this.filtriraneBesede);
        char[] beseda = new char[6];

        for (int i=0; i<this.dolzinaBesed; i++) {
            char novaCrka = vrniNajCrkoKiNiBlaZe(pogostostCrk);
            pogostostCrk[novaCrka] = 0;

            beseda[i] = novaCrka;
        }
//        System.out.println(Arrays.toString(this.uporabljeneCrke));

        return beseda;
    }

    public char[] vrniBesedo2() {
//        long start = System.currentTimeMillis();
//        System.out.println("Računam optimalno besedo...");

        float najOdstrani = 0;
        short najBesedaIndeks = -1;

        for (short i=0; i<this.filtriraneBesede.length; i++) {
            if (this.slovar[i] == null) {
                continue;
            }

            float kolikoBesedOdstrani = kolikoBesedOdstrani(i);

            if (kolikoBesedOdstrani > najOdstrani) {
                najOdstrani = kolikoBesedOdstrani;
                najBesedaIndeks = i;
            }
        }

//        long totTime = (System.currentTimeMillis() - start) / 1000;
//        System.out.println("Rabil sem " + totTime + " sekund.");

        return this.filtriraneBesede[najBesedaIndeks];
    }

    public float kolikoBesedOdstrani(short i1) {
        float odstranjeneBesede = 0;

        short counterBesed = 0;
        for (short i2=0; i2<this.filtriraneBesede.length; i2++) {
            String beseda1 = new String(this.slovar[i1]);
            String beseda2 = new String(this.slovar[i2]);

            char[] odziv = pretvoriOdziv(TestSkupno.izracunajOdziv(beseda1, beseda2));
            char[][] tempBesede = Arrays.copyOf(this.filtriraneBesede, this.filtriraneBesede.length);
            char[][] filtriraneTemp = filtrirajBesede(tempBesede, tempBesede[i1], odziv);

            int razlika = this.filtriraneBesede.length - filtriraneTemp.length;

            odstranjeneBesede += razlika;
            counterBesed++;
        }

        return odstranjeneBesede / counterBesed;
    }

    public char vrniNajCrkoKiNiBlaZe(short[] pogostost) {
        short najPojav = 0;
        char najCrka = 'a';

        for (char crka='a'; crka<='z'; crka++) {
            if (pogostost[crka] > najPojav) {
                najPojav = pogostost[crka];
                najCrka = crka;
            }
        }

        return najCrka;
    }

    public short[] vrniPogostostCrk(char[][] seznamBesed) {
        short[] pogostostCrk = new short['z' + 1];

        for (char[] beseda: seznamBesed) {
            if (beseda == null) {
                continue;
            }

            for (char crka: beseda) {
                pogostostCrk[crka]++;
            }
        }

        return pogostostCrk;
    }

    public char[][] pretvoriBesede(Set<String> besede) {
        int stBesed = besede.size();
        char[][] tabelaBesed = new char[stBesed][this.dolzinaBesed];

        short indeks = 0;
        for (String beseda: besede) {
            tabelaBesed[indeks] = beseda.toCharArray();
            indeks++;
        }

        return tabelaBesed;
    }

    public char[] pretvoriOdziv(List<Character> odzivSeznam) {
        char[] odziv = new char[this.dolzinaBesed];

        for (short i=0; i<this.dolzinaBesed; i++) {
            odziv[i] = odzivSeznam.get(i);
        }

        return odziv;
    }

    public short kolikoVTabeli(char[][] tabela, char[] iskani) {
        short stevilo = 0;

        for (char[] element: tabela) {
            if (Arrays.equals(element, iskani)) {
                stevilo++;
            }
        }

        return stevilo;
    }

    public short kolikoVTabeli(char[] tabela, char iskani) {
        short stevilo = 0;

        for (char element: tabela) {
            if (element == iskani) {
                stevilo++;
            }
        }

        return stevilo;
    }

    public short kolikoVTabeli(boolean[] tabela, boolean iskani) {
        short stevilo = 0;

        for (boolean element: tabela) {
            if (element == iskani) {
                stevilo++;
            }
        }

        return stevilo;
    }

    public void odstaniUgotovljenoBesedo() {
        for (short i=0; i<this.zacetneBesede.length; i++) {
            if (Arrays.equals(this.zacetneBesede[i], this.prejsnjaIzbira)) {
                this.zacetneBesede[i] = null;
                break;
            }
        }

//        this.zacetneBesede = odstraniVseNull(this.zacetneBesede);
    }

    public char[][] odstraniVseNull(char[][] seznam) {
        short stNull = kolikoVTabeli(seznam, null);
        int novaDolzina = seznam.length - stNull;
        char[][] novaTabela = new char[novaDolzina][this.dolzinaBesed];

        short counterNove = 0;
        for (char[] beseda : seznam) {
            if (beseda == null) {
                continue;
            }

            novaTabela[counterNove] = beseda;
            counterNove++;
        }

        return novaTabela;
    }

    public char[][] filtrirajBesede(char[][] besede, char[] prejsnjaBeseda, char[] odziv) {
        char[] pravilneCrke = new char[this.dolzinaBesed];
        char[] ugodneCrke = new char[this.dolzinaBesed];
        char[] napacneCrke = new char[this.dolzinaBesed];

        for (int i=0; i<odziv.length; i++) {
            char znak = odziv[i];

            switch (znak) {
                case '+':
                    pravilneCrke[i] = prejsnjaBeseda[i];
                    break;
                case 'o':
                    ugodneCrke[i] = prejsnjaBeseda[i];
                    break;
                case '-':
                    napacneCrke[i] = prejsnjaBeseda[i];
                    break;
            }
        }

        outer:
        for (int i=0; i<besede.length; i++) {
            char[] beseda = besede[i];

            if (beseda == null) {
                continue;
            }

            // pravilne črke
            for (int j = 0; j < pravilneCrke.length; j++) {
                char pravilnaCrka = pravilneCrke[j];

                if (pravilnaCrka == 0) {
                    continue;
                }

                if (pravilnaCrka != beseda[j]) {
                    besede[i] = null;
                    continue outer;
                }
            }

            // ugodne črke
            for (int j = 0; j < ugodneCrke.length; j++) {
                char ugodnaCrka = ugodneCrke[j];

                if (ugodnaCrka == 0) {
                    continue;
                }

                // odstrani besedo, če ima ugodno črko na istem indeksu
                if (ugodnaCrka == beseda[j]) {
                    besede[i] = null;
                    continue outer;
                }

                // odstrani besedo, če ima manj ugodnih črk kakor jih je v odzivu
                if (kolikoVTabeli(beseda, ugodnaCrka) < kolikoVTabeli(ugodneCrke, ugodnaCrka)) {
                    besede[i] = null;
                    continue outer;
                }
            }

            // napačne črke
            for (char napacnaCrka : napacneCrke) {
                if (napacnaCrka == 0) {
                    continue;
                }

                // odstrani besedo, če ima napačno črko (ki ni pravilna ali ugodna)
                if (kolikoVTabeli(pravilneCrke, napacnaCrka) + kolikoVTabeli(ugodneCrke, napacnaCrka) < kolikoVTabeli(beseda, napacnaCrka)) {
                    besede[i] = null;
                    continue outer;
                }
            }
        }

        return odstraniVseNull(besede);
    }

    public char[] dodajVTabelo(char[] tabela, char crka) {
        char[] tabela2 = new char[tabela.length + 1];

        for (int i=0; i<tabela.length; i++) {
            tabela2[i] = tabela[i];
        }

        tabela2[tabela.length] = crka;

        return tabela2;
    }

    public char[][] vrniMozneOdzive() {
        // Moj Bog, žal mi je, da sem grešil in žalil tebe, ki si moj najboljši Oče. Trdno sklenem, da se bom poboljšal, pomagaj mi s svojo milostjo. Amen.
        return new char[][]{{'-','-','-','-','-','-'},{'-','-','-','-','-','o'},{'-','-','-','-','-','+'},{'-','-','-','-','o','-'},{'-','-','-','-','o','o'},{'-','-','-','-','o','+'},{'-','-','-','-','+','-'},{'-','-','-','-','+','o'},{'-','-','-','-','+','+'},{'-','-','-','o','-','-'},{'-','-','-','o','-','o'},{'-','-','-','o','-','+'},{'-','-','-','o','o','-'},{'-','-','-','o','o','o'},{'-','-','-','o','o','+'},{'-','-','-','o','+','-'},{'-','-','-','o','+','o'},{'-','-','-','o','+','+'},{'-','-','-','+','-','-'},{'-','-','-','+','-','o'},{'-','-','-','+','-','+'},{'-','-','-','+','o','-'},{'-','-','-','+','o','o'},{'-','-','-','+','o','+'},{'-','-','-','+','+','-'},{'-','-','-','+','+','o'},{'-','-','-','+','+','+'},{'-','-','o','-','-','-'},{'-','-','o','-','-','o'},{'-','-','o','-','-','+'},{'-','-','o','-','o','-'},{'-','-','o','-','o','o'},{'-','-','o','-','o','+'},{'-','-','o','-','+','-'},{'-','-','o','-','+','o'},{'-','-','o','-','+','+'},{'-','-','o','o','-','-'},{'-','-','o','o','-','o'},{'-','-','o','o','-','+'},{'-','-','o','o','o','-'},{'-','-','o','o','o','o'},{'-','-','o','o','o','+'},{'-','-','o','o','+','-'},{'-','-','o','o','+','o'},{'-','-','o','o','+','+'},{'-','-','o','+','-','-'},{'-','-','o','+','-','o'},{'-','-','o','+','-','+'},{'-','-','o','+','o','-'},{'-','-','o','+','o','o'},{'-','-','o','+','o','+'},{'-','-','o','+','+','-'},{'-','-','o','+','+','o'},{'-','-','o','+','+','+'},{'-','-','+','-','-','-'},{'-','-','+','-','-','o'},{'-','-','+','-','-','+'},{'-','-','+','-','o','-'},{'-','-','+','-','o','o'},{'-','-','+','-','o','+'},{'-','-','+','-','+','-'},{'-','-','+','-','+','o'},{'-','-','+','-','+','+'},{'-','-','+','o','-','-'},{'-','-','+','o','-','o'},{'-','-','+','o','-','+'},{'-','-','+','o','o','-'},{'-','-','+','o','o','o'},{'-','-','+','o','o','+'},{'-','-','+','o','+','-'},{'-','-','+','o','+','o'},{'-','-','+','o','+','+'},{'-','-','+','+','-','-'},{'-','-','+','+','-','o'},{'-','-','+','+','-','+'},{'-','-','+','+','o','-'},{'-','-','+','+','o','o'},{'-','-','+','+','o','+'},{'-','-','+','+','+','-'},{'-','-','+','+','+','o'},{'-','-','+','+','+','+'},{'-','o','-','-','-','-'},{'-','o','-','-','-','o'},{'-','o','-','-','-','+'},{'-','o','-','-','o','-'},{'-','o','-','-','o','o'},{'-','o','-','-','o','+'},{'-','o','-','-','+','-'},{'-','o','-','-','+','o'},{'-','o','-','-','+','+'},{'-','o','-','o','-','-'},{'-','o','-','o','-','o'},{'-','o','-','o','-','+'},{'-','o','-','o','o','-'},{'-','o','-','o','o','o'},{'-','o','-','o','o','+'},{'-','o','-','o','+','-'},{'-','o','-','o','+','o'},{'-','o','-','o','+','+'},{'-','o','-','+','-','-'},{'-','o','-','+','-','o'},{'-','o','-','+','-','+'},{'-','o','-','+','o','-'},{'-','o','-','+','o','o'},{'-','o','-','+','o','+'},{'-','o','-','+','+','-'},{'-','o','-','+','+','o'},{'-','o','-','+','+','+'},{'-','o','o','-','-','-'},{'-','o','o','-','-','o'},{'-','o','o','-','-','+'},{'-','o','o','-','o','-'},{'-','o','o','-','o','o'},{'-','o','o','-','o','+'},{'-','o','o','-','+','-'},{'-','o','o','-','+','o'},{'-','o','o','-','+','+'},{'-','o','o','o','-','-'},{'-','o','o','o','-','o'},{'-','o','o','o','-','+'},{'-','o','o','o','o','-'},{'-','o','o','o','o','o'},{'-','o','o','o','o','+'},{'-','o','o','o','+','-'},{'-','o','o','o','+','o'},{'-','o','o','o','+','+'},{'-','o','o','+','-','-'},{'-','o','o','+','-','o'},{'-','o','o','+','-','+'},{'-','o','o','+','o','-'},{'-','o','o','+','o','o'},{'-','o','o','+','o','+'},{'-','o','o','+','+','-'},{'-','o','o','+','+','o'},{'-','o','o','+','+','+'},{'-','o','+','-','-','-'},{'-','o','+','-','-','o'},{'-','o','+','-','-','+'},{'-','o','+','-','o','-'},{'-','o','+','-','o','o'},{'-','o','+','-','o','+'},{'-','o','+','-','+','-'},{'-','o','+','-','+','o'},{'-','o','+','-','+','+'},{'-','o','+','o','-','-'},{'-','o','+','o','-','o'},{'-','o','+','o','-','+'},{'-','o','+','o','o','-'},{'-','o','+','o','o','o'},{'-','o','+','o','o','+'},{'-','o','+','o','+','-'},{'-','o','+','o','+','o'},{'-','o','+','o','+','+'},{'-','o','+','+','-','-'},{'-','o','+','+','-','o'},{'-','o','+','+','-','+'},{'-','o','+','+','o','-'},{'-','o','+','+','o','o'},{'-','o','+','+','o','+'},{'-','o','+','+','+','-'},{'-','o','+','+','+','o'},{'-','o','+','+','+','+'},{'-','+','-','-','-','-'},{'-','+','-','-','-','o'},{'-','+','-','-','-','+'},{'-','+','-','-','o','-'},{'-','+','-','-','o','o'},{'-','+','-','-','o','+'},{'-','+','-','-','+','-'},{'-','+','-','-','+','o'},{'-','+','-','-','+','+'},{'-','+','-','o','-','-'},{'-','+','-','o','-','o'},{'-','+','-','o','-','+'},{'-','+','-','o','o','-'},{'-','+','-','o','o','o'},{'-','+','-','o','o','+'},{'-','+','-','o','+','-'},{'-','+','-','o','+','o'},{'-','+','-','o','+','+'},{'-','+','-','+','-','-'},{'-','+','-','+','-','o'},{'-','+','-','+','-','+'},{'-','+','-','+','o','-'},{'-','+','-','+','o','o'},{'-','+','-','+','o','+'},{'-','+','-','+','+','-'},{'-','+','-','+','+','o'},{'-','+','-','+','+','+'},{'-','+','o','-','-','-'},{'-','+','o','-','-','o'},{'-','+','o','-','-','+'},{'-','+','o','-','o','-'},{'-','+','o','-','o','o'},{'-','+','o','-','o','+'},{'-','+','o','-','+','-'},{'-','+','o','-','+','o'},{'-','+','o','-','+','+'},{'-','+','o','o','-','-'},{'-','+','o','o','-','o'},{'-','+','o','o','-','+'},{'-','+','o','o','o','-'},{'-','+','o','o','o','o'},{'-','+','o','o','o','+'},{'-','+','o','o','+','-'},{'-','+','o','o','+','o'},{'-','+','o','o','+','+'},{'-','+','o','+','-','-'},{'-','+','o','+','-','o'},{'-','+','o','+','-','+'},{'-','+','o','+','o','-'},{'-','+','o','+','o','o'},{'-','+','o','+','o','+'},{'-','+','o','+','+','-'},{'-','+','o','+','+','o'},{'-','+','o','+','+','+'},{'-','+','+','-','-','-'},{'-','+','+','-','-','o'},{'-','+','+','-','-','+'},{'-','+','+','-','o','-'},{'-','+','+','-','o','o'},{'-','+','+','-','o','+'},{'-','+','+','-','+','-'},{'-','+','+','-','+','o'},{'-','+','+','-','+','+'},{'-','+','+','o','-','-'},{'-','+','+','o','-','o'},{'-','+','+','o','-','+'},{'-','+','+','o','o','-'},{'-','+','+','o','o','o'},{'-','+','+','o','o','+'},{'-','+','+','o','+','-'},{'-','+','+','o','+','o'},{'-','+','+','o','+','+'},{'-','+','+','+','-','-'},{'-','+','+','+','-','o'},{'-','+','+','+','-','+'},{'-','+','+','+','o','-'},{'-','+','+','+','o','o'},{'-','+','+','+','o','+'},{'-','+','+','+','+','-'},{'-','+','+','+','+','o'},{'-','+','+','+','+','+'},{'o','-','-','-','-','-'},{'o','-','-','-','-','o'},{'o','-','-','-','-','+'},{'o','-','-','-','o','-'},{'o','-','-','-','o','o'},{'o','-','-','-','o','+'},{'o','-','-','-','+','-'},{'o','-','-','-','+','o'},{'o','-','-','-','+','+'},{'o','-','-','o','-','-'},{'o','-','-','o','-','o'},{'o','-','-','o','-','+'},{'o','-','-','o','o','-'},{'o','-','-','o','o','o'},{'o','-','-','o','o','+'},{'o','-','-','o','+','-'},{'o','-','-','o','+','o'},{'o','-','-','o','+','+'},{'o','-','-','+','-','-'},{'o','-','-','+','-','o'},{'o','-','-','+','-','+'},{'o','-','-','+','o','-'},{'o','-','-','+','o','o'},{'o','-','-','+','o','+'},{'o','-','-','+','+','-'},{'o','-','-','+','+','o'},{'o','-','-','+','+','+'},{'o','-','o','-','-','-'},{'o','-','o','-','-','o'},{'o','-','o','-','-','+'},{'o','-','o','-','o','-'},{'o','-','o','-','o','o'},{'o','-','o','-','o','+'},{'o','-','o','-','+','-'},{'o','-','o','-','+','o'},{'o','-','o','-','+','+'},{'o','-','o','o','-','-'},{'o','-','o','o','-','o'},{'o','-','o','o','-','+'},{'o','-','o','o','o','-'},{'o','-','o','o','o','o'},{'o','-','o','o','o','+'},{'o','-','o','o','+','-'},{'o','-','o','o','+','o'},{'o','-','o','o','+','+'},{'o','-','o','+','-','-'},{'o','-','o','+','-','o'},{'o','-','o','+','-','+'},{'o','-','o','+','o','-'},{'o','-','o','+','o','o'},{'o','-','o','+','o','+'},{'o','-','o','+','+','-'},{'o','-','o','+','+','o'},{'o','-','o','+','+','+'},{'o','-','+','-','-','-'},{'o','-','+','-','-','o'},{'o','-','+','-','-','+'},{'o','-','+','-','o','-'},{'o','-','+','-','o','o'},{'o','-','+','-','o','+'},{'o','-','+','-','+','-'},{'o','-','+','-','+','o'},{'o','-','+','-','+','+'},{'o','-','+','o','-','-'},{'o','-','+','o','-','o'},{'o','-','+','o','-','+'},{'o','-','+','o','o','-'},{'o','-','+','o','o','o'},{'o','-','+','o','o','+'},{'o','-','+','o','+','-'},{'o','-','+','o','+','o'},{'o','-','+','o','+','+'},{'o','-','+','+','-','-'},{'o','-','+','+','-','o'},{'o','-','+','+','-','+'},{'o','-','+','+','o','-'},{'o','-','+','+','o','o'},{'o','-','+','+','o','+'},{'o','-','+','+','+','-'},{'o','-','+','+','+','o'},{'o','-','+','+','+','+'},{'o','o','-','-','-','-'},{'o','o','-','-','-','o'},{'o','o','-','-','-','+'},{'o','o','-','-','o','-'},{'o','o','-','-','o','o'},{'o','o','-','-','o','+'},{'o','o','-','-','+','-'},{'o','o','-','-','+','o'},{'o','o','-','-','+','+'},{'o','o','-','o','-','-'},{'o','o','-','o','-','o'},{'o','o','-','o','-','+'},{'o','o','-','o','o','-'},{'o','o','-','o','o','o'},{'o','o','-','o','o','+'},{'o','o','-','o','+','-'},{'o','o','-','o','+','o'},{'o','o','-','o','+','+'},{'o','o','-','+','-','-'},{'o','o','-','+','-','o'},{'o','o','-','+','-','+'},{'o','o','-','+','o','-'},{'o','o','-','+','o','o'},{'o','o','-','+','o','+'},{'o','o','-','+','+','-'},{'o','o','-','+','+','o'},{'o','o','-','+','+','+'},{'o','o','o','-','-','-'},{'o','o','o','-','-','o'},{'o','o','o','-','-','+'},{'o','o','o','-','o','-'},{'o','o','o','-','o','o'},{'o','o','o','-','o','+'},{'o','o','o','-','+','-'},{'o','o','o','-','+','o'},{'o','o','o','-','+','+'},{'o','o','o','o','-','-'},{'o','o','o','o','-','o'},{'o','o','o','o','-','+'},{'o','o','o','o','o','-'},{'o','o','o','o','o','o'},{'o','o','o','o','o','+'},{'o','o','o','o','+','-'},{'o','o','o','o','+','o'},{'o','o','o','o','+','+'},{'o','o','o','+','-','-'},{'o','o','o','+','-','o'},{'o','o','o','+','-','+'},{'o','o','o','+','o','-'},{'o','o','o','+','o','o'},{'o','o','o','+','o','+'},{'o','o','o','+','+','-'},{'o','o','o','+','+','o'},{'o','o','o','+','+','+'},{'o','o','+','-','-','-'},{'o','o','+','-','-','o'},{'o','o','+','-','-','+'},{'o','o','+','-','o','-'},{'o','o','+','-','o','o'},{'o','o','+','-','o','+'},{'o','o','+','-','+','-'},{'o','o','+','-','+','o'},{'o','o','+','-','+','+'},{'o','o','+','o','-','-'},{'o','o','+','o','-','o'},{'o','o','+','o','-','+'},{'o','o','+','o','o','-'},{'o','o','+','o','o','o'},{'o','o','+','o','o','+'},{'o','o','+','o','+','-'},{'o','o','+','o','+','o'},{'o','o','+','o','+','+'},{'o','o','+','+','-','-'},{'o','o','+','+','-','o'},{'o','o','+','+','-','+'},{'o','o','+','+','o','-'},{'o','o','+','+','o','o'},{'o','o','+','+','o','+'},{'o','o','+','+','+','-'},{'o','o','+','+','+','o'},{'o','o','+','+','+','+'},{'o','+','-','-','-','-'},{'o','+','-','-','-','o'},{'o','+','-','-','-','+'},{'o','+','-','-','o','-'},{'o','+','-','-','o','o'},{'o','+','-','-','o','+'},{'o','+','-','-','+','-'},{'o','+','-','-','+','o'},{'o','+','-','-','+','+'},{'o','+','-','o','-','-'},{'o','+','-','o','-','o'},{'o','+','-','o','-','+'},{'o','+','-','o','o','-'},{'o','+','-','o','o','o'},{'o','+','-','o','o','+'},{'o','+','-','o','+','-'},{'o','+','-','o','+','o'},{'o','+','-','o','+','+'},{'o','+','-','+','-','-'},{'o','+','-','+','-','o'},{'o','+','-','+','-','+'},{'o','+','-','+','o','-'},{'o','+','-','+','o','o'},{'o','+','-','+','o','+'},{'o','+','-','+','+','-'},{'o','+','-','+','+','o'},{'o','+','-','+','+','+'},{'o','+','o','-','-','-'},{'o','+','o','-','-','o'},{'o','+','o','-','-','+'},{'o','+','o','-','o','-'},{'o','+','o','-','o','o'},{'o','+','o','-','o','+'},{'o','+','o','-','+','-'},{'o','+','o','-','+','o'},{'o','+','o','-','+','+'},{'o','+','o','o','-','-'},{'o','+','o','o','-','o'},{'o','+','o','o','-','+'},{'o','+','o','o','o','-'},{'o','+','o','o','o','o'},{'o','+','o','o','o','+'},{'o','+','o','o','+','-'},{'o','+','o','o','+','o'},{'o','+','o','o','+','+'},{'o','+','o','+','-','-'},{'o','+','o','+','-','o'},{'o','+','o','+','-','+'},{'o','+','o','+','o','-'},{'o','+','o','+','o','o'},{'o','+','o','+','o','+'},{'o','+','o','+','+','-'},{'o','+','o','+','+','o'},{'o','+','o','+','+','+'},{'o','+','+','-','-','-'},{'o','+','+','-','-','o'},{'o','+','+','-','-','+'},{'o','+','+','-','o','-'},{'o','+','+','-','o','o'},{'o','+','+','-','o','+'},{'o','+','+','-','+','-'},{'o','+','+','-','+','o'},{'o','+','+','-','+','+'},{'o','+','+','o','-','-'},{'o','+','+','o','-','o'},{'o','+','+','o','-','+'},{'o','+','+','o','o','-'},{'o','+','+','o','o','o'},{'o','+','+','o','o','+'},{'o','+','+','o','+','-'},{'o','+','+','o','+','o'},{'o','+','+','o','+','+'},{'o','+','+','+','-','-'},{'o','+','+','+','-','o'},{'o','+','+','+','-','+'},{'o','+','+','+','o','-'},{'o','+','+','+','o','o'},{'o','+','+','+','o','+'},{'o','+','+','+','+','-'},{'o','+','+','+','+','o'},{'o','+','+','+','+','+'},{'+','-','-','-','-','-'},{'+','-','-','-','-','o'},{'+','-','-','-','-','+'},{'+','-','-','-','o','-'},{'+','-','-','-','o','o'},{'+','-','-','-','o','+'},{'+','-','-','-','+','-'},{'+','-','-','-','+','o'},{'+','-','-','-','+','+'},{'+','-','-','o','-','-'},{'+','-','-','o','-','o'},{'+','-','-','o','-','+'},{'+','-','-','o','o','-'},{'+','-','-','o','o','o'},{'+','-','-','o','o','+'},{'+','-','-','o','+','-'},{'+','-','-','o','+','o'},{'+','-','-','o','+','+'},{'+','-','-','+','-','-'},{'+','-','-','+','-','o'},{'+','-','-','+','-','+'},{'+','-','-','+','o','-'},{'+','-','-','+','o','o'},{'+','-','-','+','o','+'},{'+','-','-','+','+','-'},{'+','-','-','+','+','o'},{'+','-','-','+','+','+'},{'+','-','o','-','-','-'},{'+','-','o','-','-','o'},{'+','-','o','-','-','+'},{'+','-','o','-','o','-'},{'+','-','o','-','o','o'},{'+','-','o','-','o','+'},{'+','-','o','-','+','-'},{'+','-','o','-','+','o'},{'+','-','o','-','+','+'},{'+','-','o','o','-','-'},{'+','-','o','o','-','o'},{'+','-','o','o','-','+'},{'+','-','o','o','o','-'},{'+','-','o','o','o','o'},{'+','-','o','o','o','+'},{'+','-','o','o','+','-'},{'+','-','o','o','+','o'},{'+','-','o','o','+','+'},{'+','-','o','+','-','-'},{'+','-','o','+','-','o'},{'+','-','o','+','-','+'},{'+','-','o','+','o','-'},{'+','-','o','+','o','o'},{'+','-','o','+','o','+'},{'+','-','o','+','+','-'},{'+','-','o','+','+','o'},{'+','-','o','+','+','+'},{'+','-','+','-','-','-'},{'+','-','+','-','-','o'},{'+','-','+','-','-','+'},{'+','-','+','-','o','-'},{'+','-','+','-','o','o'},{'+','-','+','-','o','+'},{'+','-','+','-','+','-'},{'+','-','+','-','+','o'},{'+','-','+','-','+','+'},{'+','-','+','o','-','-'},{'+','-','+','o','-','o'},{'+','-','+','o','-','+'},{'+','-','+','o','o','-'},{'+','-','+','o','o','o'},{'+','-','+','o','o','+'},{'+','-','+','o','+','-'},{'+','-','+','o','+','o'},{'+','-','+','o','+','+'},{'+','-','+','+','-','-'},{'+','-','+','+','-','o'},{'+','-','+','+','-','+'},{'+','-','+','+','o','-'},{'+','-','+','+','o','o'},{'+','-','+','+','o','+'},{'+','-','+','+','+','-'},{'+','-','+','+','+','o'},{'+','-','+','+','+','+'},{'+','o','-','-','-','-'},{'+','o','-','-','-','o'},{'+','o','-','-','-','+'},{'+','o','-','-','o','-'},{'+','o','-','-','o','o'},{'+','o','-','-','o','+'},{'+','o','-','-','+','-'},{'+','o','-','-','+','o'},{'+','o','-','-','+','+'},{'+','o','-','o','-','-'},{'+','o','-','o','-','o'},{'+','o','-','o','-','+'},{'+','o','-','o','o','-'},{'+','o','-','o','o','o'},{'+','o','-','o','o','+'},{'+','o','-','o','+','-'},{'+','o','-','o','+','o'},{'+','o','-','o','+','+'},{'+','o','-','+','-','-'},{'+','o','-','+','-','o'},{'+','o','-','+','-','+'},{'+','o','-','+','o','-'},{'+','o','-','+','o','o'},{'+','o','-','+','o','+'},{'+','o','-','+','+','-'},{'+','o','-','+','+','o'},{'+','o','-','+','+','+'},{'+','o','o','-','-','-'},{'+','o','o','-','-','o'},{'+','o','o','-','-','+'},{'+','o','o','-','o','-'},{'+','o','o','-','o','o'},{'+','o','o','-','o','+'},{'+','o','o','-','+','-'},{'+','o','o','-','+','o'},{'+','o','o','-','+','+'},{'+','o','o','o','-','-'},{'+','o','o','o','-','o'},{'+','o','o','o','-','+'},{'+','o','o','o','o','-'},{'+','o','o','o','o','o'},{'+','o','o','o','o','+'},{'+','o','o','o','+','-'},{'+','o','o','o','+','o'},{'+','o','o','o','+','+'},{'+','o','o','+','-','-'},{'+','o','o','+','-','o'},{'+','o','o','+','-','+'},{'+','o','o','+','o','-'},{'+','o','o','+','o','o'},{'+','o','o','+','o','+'},{'+','o','o','+','+','-'},{'+','o','o','+','+','o'},{'+','o','o','+','+','+'},{'+','o','+','-','-','-'},{'+','o','+','-','-','o'},{'+','o','+','-','-','+'},{'+','o','+','-','o','-'},{'+','o','+','-','o','o'},{'+','o','+','-','o','+'},{'+','o','+','-','+','-'},{'+','o','+','-','+','o'},{'+','o','+','-','+','+'},{'+','o','+','o','-','-'},{'+','o','+','o','-','o'},{'+','o','+','o','-','+'},{'+','o','+','o','o','-'},{'+','o','+','o','o','o'},{'+','o','+','o','o','+'},{'+','o','+','o','+','-'},{'+','o','+','o','+','o'},{'+','o','+','o','+','+'},{'+','o','+','+','-','-'},{'+','o','+','+','-','o'},{'+','o','+','+','-','+'},{'+','o','+','+','o','-'},{'+','o','+','+','o','o'},{'+','o','+','+','o','+'},{'+','o','+','+','+','-'},{'+','o','+','+','+','o'},{'+','o','+','+','+','+'},{'+','+','-','-','-','-'},{'+','+','-','-','-','o'},{'+','+','-','-','-','+'},{'+','+','-','-','o','-'},{'+','+','-','-','o','o'},{'+','+','-','-','o','+'},{'+','+','-','-','+','-'},{'+','+','-','-','+','o'},{'+','+','-','-','+','+'},{'+','+','-','o','-','-'},{'+','+','-','o','-','o'},{'+','+','-','o','-','+'},{'+','+','-','o','o','-'},{'+','+','-','o','o','o'},{'+','+','-','o','o','+'},{'+','+','-','o','+','-'},{'+','+','-','o','+','o'},{'+','+','-','o','+','+'},{'+','+','-','+','-','-'},{'+','+','-','+','-','o'},{'+','+','-','+','-','+'},{'+','+','-','+','o','-'},{'+','+','-','+','o','o'},{'+','+','-','+','o','+'},{'+','+','-','+','+','-'},{'+','+','-','+','+','o'},{'+','+','-','+','+','+'},{'+','+','o','-','-','-'},{'+','+','o','-','-','o'},{'+','+','o','-','-','+'},{'+','+','o','-','o','-'},{'+','+','o','-','o','o'},{'+','+','o','-','o','+'},{'+','+','o','-','+','-'},{'+','+','o','-','+','o'},{'+','+','o','-','+','+'},{'+','+','o','o','-','-'},{'+','+','o','o','-','o'},{'+','+','o','o','-','+'},{'+','+','o','o','o','-'},{'+','+','o','o','o','o'},{'+','+','o','o','o','+'},{'+','+','o','o','+','-'},{'+','+','o','o','+','o'},{'+','+','o','o','+','+'},{'+','+','o','+','-','-'},{'+','+','o','+','-','o'},{'+','+','o','+','-','+'},{'+','+','o','+','o','-'},{'+','+','o','+','o','o'},{'+','+','o','+','o','+'},{'+','+','o','+','+','-'},{'+','+','o','+','+','o'},{'+','+','o','+','+','+'},{'+','+','+','-','-','-'},{'+','+','+','-','-','o'},{'+','+','+','-','-','+'},{'+','+','+','-','o','-'},{'+','+','+','-','o','o'},{'+','+','+','-','o','+'},{'+','+','+','-','+','-'},{'+','+','+','-','+','o'},{'+','+','+','-','+','+'},{'+','+','+','o','-','-'},{'+','+','+','o','-','o'},{'+','+','+','o','-','+'},{'+','+','+','o','o','-'},{'+','+','+','o','o','o'},{'+','+','+','o','o','+'},{'+','+','+','o','+','-'},{'+','+','+','o','+','o'},{'+','+','+','o','+','+'},{'+','+','+','+','-','-'},{'+','+','+','+','-','o'},{'+','+','+','+','-','+'},{'+','+','+','+','o','-'},{'+','+','+','+','o','o'},{'+','+','+','+','o','+'},{'+','+','+','+','+','-'},{'+','+','+','+','+','o'},{'+','+','+','+','+','+'}};
    }

    public boolean[] seSplacaIskatCrke() {
        boolean[] razlike = vrniTabeloRazlik();
        short stRazlik = kolikoVTabeli(razlike, true);

        // testiraj katera možnost je najboljsa

        // TODO za zdaj se zdi, da stRazlik je najboljše <= 4 in količina besed > (2 * stRazlik)
        // TODO ne vem pa še če je to to... morda lahko še kaj optimiziram
        if (stRazlik <= 4 && stRazlik >= 1 && this.filtriraneBesede.length > (2 * stRazlik)) {
            return razlike;
        }

        return null;
    }

    public boolean[] vrniTabeloRazlik() {
        boolean[] tabelaIndeksov = new boolean[6];
        char[] prvaBeseda = this.filtriraneBesede[0];

        outer:
        for (short i=0; i<this.dolzinaBesed; i++) {
            for (short j=1; j<this.filtriraneBesede.length; j++) {
                char[] beseda = this.filtriraneBesede[j];

                if (prvaBeseda[i] != beseda[i]) {
                    tabelaIndeksov[i] = true;
                    continue outer;
                }
            }
        }

        return tabelaIndeksov;
    }

    public char[] vrniBesedoZaIskanjeCrk(boolean[] razlike) {
        // ne indeksu crke shranimo kolikokrat se pojavi (kot ena mapa)
        // lahko bi rabil dolzino [('z' + 1) - 'a'], ampak se mi nece
        short[] stCrk = new short['z' + 1];

        // zapiši koliko vsakih črk je
        for (short i=0; i<razlike.length; i++) {
            boolean jeRazlika = razlike[i];

            if (!jeRazlika) {
                continue;
            }

            for (char[] beseda: this.filtriraneBesede) {
                stCrk[beseda[i]]++;
            }
        }

        char[] besedaZaIskanje = "aaaaaa".toCharArray();
        for (short i=0; i<6; i++) {
            char najCrka = vrniNajCrko(stCrk);

            if (stCrk[najCrka] == 0) {
                break;
            }

            besedaZaIskanje[i] = najCrka;
            stCrk[najCrka] = 0;
        }


        return besedaZaIskanje;
    }

    public char vrniNajCrko(short[] stCrk) {
        char najCrka = 0;
        short najPojav = -1;

        for (char crka='a'; crka<='z'; crka++) {
            if (stCrk[crka] > najPojav) {
                najCrka = crka;
                najPojav = stCrk[crka];
            }
        }

        return najCrka;
    }
}
